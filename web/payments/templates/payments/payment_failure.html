{% extends "base.html" %}

{% block title %}Plată eșuată – Comanda #{{ order.id }}{% endblock %}

{% block content %}
<section class="py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-7 col-md-9">

        <div class="card shadow-sm border-danger">
          <div class="card-body p-4">
            <div class="d-flex align-items-center mb-3">
              <div class="me-3">
                <span class="badge bg-danger rounded-pill me-2">
                  !
                </span>
              </div>
              <div>
                <h1 class="h4 mb-0">Plata nu a fost finalizată</h1>
                <p class="text-muted mb-0">
                  Comanda #{{ order.id }} nu a fost plătită.
                </p>
              </div>
            </div>

            <hr>

            <p class="mb-3">
              Tranzacția a fost anulată sau a apărut o eroare la procesare.
              Nu ți s-au retras bani pentru această comandă.
            </p>

            {% if payment %}
              <p class="small text-muted mb-3">
                Ultima încercare de plată: #{{ payment.id }} –
                status: {{ payment.get_status_display }} –
                metodă: {{ payment.get_provider_display }}.
              </p>
            {% endif %}

            <div class="alert alert-info">
              Poți încerca din nou plata sau poți alege o altă metodă (dacă e disponibilă).
            </div>

            <div class="d-flex flex-wrap gap-2">
              <a href="{% url 'payments:payment_confirm' order.id %}" class="btn btn-primary">
                Încearcă din nou plata
              </a>
              <a href="{% url 'cart:cart' %}" class="btn btn-outline-secondary">
                Înapoi la coș
              </a>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>
{% endblock %}
