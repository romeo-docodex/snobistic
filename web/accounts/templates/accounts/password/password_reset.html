{# templates/accounts/password/password_reset.html #}
{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Resetare parolă – Snobistic{% endblock %}

{# Nu afișăm navbar + footer pe pagina de resetare #}
{% block header %}{% endblock %}
{% block footer %}{% endblock %}

{% block content %}
<section class="flat-spacing min-vh-100 d-flex align-items-center py-0" data-aos="fade-up">
  <div class="container">

    {# Logo centrat #}
    <div class="container text-center my-4 pb-5">
      <a href="{% url 'core:home' %}">
        <img src="{% static 'images/logo/logo.png' %}" alt="Snobistic" style="height:56px;width:auto;">
      </a>
    </div>

    <div class="login-wrap">

      {# ==== Col stânga: form ==== #}
      <div class="left">
        <div class="heading">
          <h4>Recuperare parolă</h4>
          <p class="text-secondary small mt-1 mb-0">
            Introdu adresa de email folosită la înregistrare.
            Îți vom trimite un link de resetare dacă emailul există în sistem.
          </p>
        </div>

        {# Mesaje Django #}
        {% if messages %}
          <div class="mt-3 mb-2" role="status" aria-live="polite">
            {% for m in messages %}
              <div class="alert alert-{{ m.tags|default:'info' }} mb-1">
                {{ m }}
              </div>
            {% endfor %}
          </div>
        {% endif %}

        <form method="post" class="form-login" novalidate autocomplete="off">
          {% csrf_token %}

          {# Honeypot anti-bot (ignorat de view) #}
          <div style="position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden;">
            <label>Lasă acest câmp gol</label>
            <input type="text" name="website" tabindex="-1" autocomplete="off">
          </div>

          <div class="wrap">
            {% if form.non_field_errors %}
              <div class="alert alert-danger mb-3">
                {{ form.non_field_errors }}
              </div>
            {% endif %}

            {# În mod normal PasswordResetForm are doar email #}
            <fieldset class="mb_20">
              {{ form.email.errors }}
              {{ form.email|as_crispy_field }}
            </fieldset>

            <p class="text-secondary small mb-0">
              Verifică și folderele <em>Spam</em> / <em>Promotions</em> dacă nu găsești emailul în inbox.
            </p>
          </div>

          <div class="button-submit mt-3">
            <button class="tf-btn btn-fill w-100" type="submit">
              <span class="text text-button">Trimite link de resetare</span>
            </button>
          </div>

          <div class="text-center mt-3">
            <a href="{% url 'accounts:login' %}" class="text-button link">
              &larr; Înapoi la autentificare
            </a>
          </div>
        </form>
      </div>

      {# ==== Col dreapta: info ==== #}
      <div class="right">
        <h4 class="mb_8">Cum funcționează resetarea?</h4>
        <p class="text-secondary">
          Pentru siguranța contului, resetarea se face doar printr-un link trimis la adresa asociată contului.
          Dacă adresa nu există în sistem, nu vom afișa acest lucru (pentru a evita abuzurile).
        </p>
        <p class="text-secondary small mb-0">
          Dacă nu mai ai acces la email, contactează suportul Snobistic pentru ajutor.
        </p>
      </div>

    </div> {# /login-wrap #}
  </div>
</section>
{% endblock %}
