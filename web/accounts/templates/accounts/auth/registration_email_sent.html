{# templates/accounts/auth/registration_email_sent.html #}
{% extends "base.html" %}
{% load static %}

{% block title %}Verifică email – Snobistic{% endblock %}

{# Nu afișăm navbar + footer pe pagina de confirmare email #}
{% block header %}{% endblock %}
{% block footer %}{% endblock %}

{% block content %}
<section class="flat-spacing min-vh-100 d-flex align-items-center py-0" data-aos="fade-up">
  <div class="container">

    {# Logo (consistent cu register/login) #}
    <div class="container text-center my-4 pb-5">
      <a href="{% url 'core:home' %}">
        <img src="{% static 'images/logo/logo.png' %}" alt="Snobistic" style="height:56px;width:auto;">
      </a>
    </div>

    <div class="login-wrap">
      {# ==== Col stânga: mesaj + resend ==== #}
      <div class="left">
        <div class="heading">
          <h4 class="mb_8">Verifică-ți email-ul</h4>
          <p class="text-secondary small mb-0">
            Ți-am trimis un <strong>link de activare</strong> pe email.
            Verifică inbox-ul (și <em>Spam</em>/<em>Promotions</em>).
          </p>
        </div>

        {# Mesaje Django #}
        {% if messages %}
          <div class="mt-3 mb-2" role="status" aria-live="polite">
            {% for m in messages %}
              <div class="alert alert-{{ m.tags|default:'info' }} mb-1">
                {{ m }}
              </div>
            {% endfor %}
          </div>
        {% endif %}

        <div class="wrap mt-3">
          <p class="text-secondary small mb-3">
            După confirmare te poți autentifica și poți începe să folosești Snobistic:
            comenzi, favorite, licitații și (dacă ai ales) setări de vânzător.
          </p>

          <hr class="my-4">

          <h6 class="mb-2">Nu ai primit emailul?</h6>
          <p class="text-secondary small mb-3">
            Introdu adresa de email și îți retrimitem linkul de activare.
          </p>

          <form method="post"
                action="{% url 'accounts:resend_activation' %}"
                class="row g-2 align-items-center">
            {% csrf_token %}

            {# ✅ păstrează next în flow (resend_activation folosește safe_next(request)) #}
            {% if request.GET.next %}
              <input type="hidden" name="next" value="{{ request.GET.next }}">
            {% endif %}

            <div class="col-12 col-md-8 mb-2 mb-md-0">
              <input type="email"
                     name="email"
                     class="form-control"
                     placeholder="adresa@exemplu.com"
                     required
                     autocomplete="email"
                     inputmode="email">
            </div>
            <div class="col-12 col-md-4">
              <button type="submit" class="tf-btn btn-fill w-100">
                <span class="text text-button">Retrimite email</span>
              </button>
            </div>
          </form>

          <div class="mt-3">
            {# ✅ păstrează next și pe back-to-login #}
            <a
              href="{% url 'accounts:login' %}{% if request.GET.next %}?next={{ request.GET.next|urlencode }}{% endif %}"
              class="font-2 text-button link mt-3"
            >
              &larr; Înapoi la autentificare
            </a>
          </div>
        </div>
      </div>

      {# ==== Col dreapta: info / CTA ==== #}
      <div class="right">
        <h4 class="mb_8">De ce este nevoie de activare?</h4>
        <p class="text-secondary">
          Activarea contului confirmă că adresa de email îți aparține și ajută la prevenirea abuzurilor,
          protejând atât contul tău, cât și tranzacțiile de pe Snobistic.
        </p>

        <p class="text-secondary mb-3">
          Dacă nu găsești emailul:
        </p>

        <ul class="text-secondary mb-3">
          <li>Verifică folderele <em>Spam</em>, <em>Junk</em> sau <em>Promotions</em>.</li>
          <li>Asigură-te că ai introdus corect adresa de email la înregistrare.</li>
          <li>Folosește formularul de retrimitere din stânga (există limitare anti-abuz).</li>
        </ul>

        <p class="text-secondary small mb-0">
          Dacă problema persistă, scrie-ne din pagina de contact.
        </p>
      </div>
    </div>
  </div>
</section>
{% endblock %}
